<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>httpd编译安装过程 | </title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="源码httpd编译安装：安装开发者套件yum groupinstall “Development Tools” -y   首先下载源码三个包：  https://mirrors.tuna.tsinghua.edu.cn/apache//apr/apr-1.6.5.tar.gz  https://mirrors.tuna.tsinghua.edu.cn/apache//apr/apr-util-1.">
<meta property="og:type" content="article">
<meta property="og:title" content="httpd编译安装过程">
<meta property="og:url" content="https://yoker.github.io/2018/12/04/httpd编译安装过程/index.html">
<meta property="og:site_name">
<meta property="og:description" content="源码httpd编译安装：安装开发者套件yum groupinstall “Development Tools” -y   首先下载源码三个包：  https://mirrors.tuna.tsinghua.edu.cn/apache//apr/apr-1.6.5.tar.gz  https://mirrors.tuna.tsinghua.edu.cn/apache//apr/apr-util-1.">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-12-05T16:27:27.903Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="httpd编译安装过程">
<meta name="twitter:description" content="源码httpd编译安装：安装开发者套件yum groupinstall “Development Tools” -y   首先下载源码三个包：  https://mirrors.tuna.tsinghua.edu.cn/apache//apr/apr-1.6.5.tar.gz  https://mirrors.tuna.tsinghua.edu.cn/apache//apr/apr-util-1.">
  
    <link rel="alternate" href="/atom.xml" title="" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo"></a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">醉问的空间</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://yoker.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-httpd编译安装过程" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/04/httpd编译安装过程/" class="article-date">
  <time datetime="2018-12-04T14:37:37.000Z" itemprop="datePublished">2018-12-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      httpd编译安装过程
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="源码httpd编译安装："><a href="#源码httpd编译安装：" class="headerlink" title="源码httpd编译安装："></a>源码httpd编译安装：</h3><h3 id="安装开发者套件"><a href="#安装开发者套件" class="headerlink" title="安装开发者套件"></a>安装开发者套件</h3><h3 id="yum-groupinstall-“Development-Tools”-y"><a href="#yum-groupinstall-“Development-Tools”-y" class="headerlink" title="yum groupinstall “Development Tools” -y"></a>yum groupinstall “Development Tools” -y</h3><p>   首先下载源码三个包：</p>
<ul>
<li><p><a href="https://mirrors.tuna.tsinghua.edu.cn/apache//apr/apr-1.6.5.tar.gz" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/apache//apr/apr-1.6.5.tar.gz</a></p>
</li>
<li><p><a href="https://mirrors.tuna.tsinghua.edu.cn/apache//apr/apr-util-1.6.1.tar.gz" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/apache//apr/apr-util-1.6.1.tar.gz</a></p>
</li>
<li><p><a href="https://mirrors.tuna.tsinghua.edu.cn/apache/httpd/httpd-2.4.37.tar.gz" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/apache/httpd/httpd-2.4.37.tar.gz</a></p>
<h3 id="我三个源码包都放在-usr-local-src"><a href="#我三个源码包都放在-usr-local-src" class="headerlink" title="我三个源码包都放在/usr/local/src/"></a>我三个源码包都放在/usr/local/src/</h3><h3 id="检查系统是否安装了GCC"><a href="#检查系统是否安装了GCC" class="headerlink" title="检查系统是否安装了GCC"></a>检查系统是否安装了GCC</h3><h3 id="root-localhost-src-gcc"><a href="#root-localhost-src-gcc" class="headerlink" title="[root@localhost src]# gcc"></a>[root@localhost src]# gcc</h3><h3 id="出现未找到命令提示，说明没有安装GCC"><a href="#出现未找到命令提示，说明没有安装GCC" class="headerlink" title="出现未找到命令提示，说明没有安装GCC"></a>出现未找到命令提示，说明没有安装GCC</h3><h3 id="安装GCC和gcc-c"><a href="#安装GCC和gcc-c" class="headerlink" title="安装GCC和gcc-c++"></a>安装GCC和gcc-c++</h3><h3 id="root-localhost-src-yum-y-install-gcc"><a href="#root-localhost-src-yum-y-install-gcc" class="headerlink" title="[root@localhost src]# yum -y install gcc"></a>[root@localhost src]# yum -y install gcc</h3><h3 id="root-localhost-pcre-8-40-yum-y-install-gcc-c"><a href="#root-localhost-pcre-8-40-yum-y-install-gcc-c" class="headerlink" title="[root@localhost pcre-8.40]# yum -y #install gcc-c++"></a>[root@localhost pcre-8.40]# yum -y #install gcc-c++</h3><h3 id="注意：如果没有安装gcc-c-，那么在-执行-configure-prefix-usr-local-pcre-时会报-configure-error-You-need-a-C-compiler-for-C-support-错误"><a href="#注意：如果没有安装gcc-c-，那么在-执行-configure-prefix-usr-local-pcre-时会报-configure-error-You-need-a-C-compiler-for-C-support-错误" class="headerlink" title="注意：如果没有安装gcc-c++，那么在 执行./configure  -prefix=/usr/local/pcre 时会报 configure: error: You need a C++ compiler for C++ support. 错误"></a>注意：如果没有安装gcc-c++，那么在 执行./configure  -prefix=/usr/local/pcre 时会报 configure: error: You need a C++ compiler for C++ support. 错误</h3><h3 id="安装apr-1-6-5"><a href="#安装apr-1-6-5" class="headerlink" title="安装apr-1.6.5"></a>安装apr-1.6.5</h3><h3 id="进入apr-1-6-5目录-cd-apr-1-6-5"><a href="#进入apr-1-6-5目录-cd-apr-1-6-5" class="headerlink" title="进入apr-1.6.5目录 cd apr-1.6.5"></a>进入apr-1.6.5目录 cd apr-1.6.5</h3><h3 id="安装：-configure-–prefix-usr-local-apr"><a href="#安装：-configure-–prefix-usr-local-apr" class="headerlink" title="安装：./configure –prefix=/usr/local/apr"></a>安装：./configure –prefix=/usr/local/apr</h3><h3 id="编译安装-make-amp-amp-make-install"><a href="#编译安装-make-amp-amp-make-install" class="headerlink" title="编译安装:make &amp;&amp; make install"></a>编译安装:make &amp;&amp; make install</h3><h3 id="安装apr-util-1-6-1"><a href="#安装apr-util-1-6-1" class="headerlink" title="安装apr-util-1.6.1"></a>安装apr-util-1.6.1</h3><h3 id="进入apr-util-1-6-1目录-cd-usr-local-src-apr-util-1-6-1"><a href="#进入apr-util-1-6-1目录-cd-usr-local-src-apr-util-1-6-1" class="headerlink" title="进入apr-util-1.6.1目录 cd /usr/local/src/apr-util-1.6.1"></a>进入apr-util-1.6.1目录 cd /usr/local/src/apr-util-1.6.1</h3><h3 id="安装：-configure-–prefix-usr-local-apr-util-–with-apr-usr-local-apr"><a href="#安装：-configure-–prefix-usr-local-apr-util-–with-apr-usr-local-apr" class="headerlink" title="安装：./configure –prefix=/usr/local/apr-util –with-apr=/usr/local/apr"></a>安装：./configure –prefix=/usr/local/apr-util –with-apr=/usr/local/apr</h3><h3 id="编译安装-make-amp-amp-make-install-1"><a href="#编译安装-make-amp-amp-make-install-1" class="headerlink" title="编译安装:make &amp;&amp; make install"></a>编译安装:make &amp;&amp; make install</h3><h3 id="编译安装可能出现的错误：下载yum-install-y-expat-devel-从新编译即可"><a href="#编译安装可能出现的错误：下载yum-install-y-expat-devel-从新编译即可" class="headerlink" title="编译安装可能出现的错误：下载yum install -y  expat-devel  从新编译即可"></a>编译安装可能出现的错误：下载yum install -y  expat-devel  从新编译即可</h3><h3 id="安装httpd-2-4-37"><a href="#安装httpd-2-4-37" class="headerlink" title="安装httpd-2.4.37"></a>安装httpd-2.4.37</h3><h3 id="安装：-configure-–with-included-apr-–prefix-usr-local-apache2-4-–with-apr-usr-local-apr-–with-apr-util-usr-local-apr-util-–enable-so-–enable-mods-shared-most"><a href="#安装：-configure-–with-included-apr-–prefix-usr-local-apache2-4-–with-apr-usr-local-apr-–with-apr-util-usr-local-apr-util-–enable-so-–enable-mods-shared-most" class="headerlink" title="安装：./configure –with-included-apr –prefix=/usr/local/apache2.4 –with-apr=/usr/local/apr –with-apr-util=/usr/local/apr-util –enable-so –enable-mods-shared=most"></a>安装：./configure –with-included-apr –prefix=/usr/local/apache2.4 –with-apr=/usr/local/apr –with-apr-util=/usr/local/apr-util –enable-so –enable-mods-shared=most</h3><h3 id="可能出现的错误：-cp-rf-apr-1-4-6-httpd-2-4-3-srclib-apr"><a href="#可能出现的错误：-cp-rf-apr-1-4-6-httpd-2-4-3-srclib-apr" class="headerlink" title="可能出现的错误： cp -rf apr-1.4.6  httpd-2.4.3/srclib/apr"></a>可能出现的错误： cp -rf apr-1.4.6  httpd-2.4.3/srclib/apr</h3><h3 id="cp-rf-apr-util-1-5-1"><a href="#cp-rf-apr-util-1-5-1" class="headerlink" title="cp -rf apr-util-1.5.1"></a>cp -rf apr-util-1.5.1</h3><h3 id="httpd-2-4-3-srclib-apr-util"><a href="#httpd-2-4-3-srclib-apr-util" class="headerlink" title="httpd-2.4.3/srclib/apr-util"></a>httpd-2.4.3/srclib/apr-util</h3><h3 id="这两句话是为了防止-安装时报如下错误-Configur-error-Bundled-APR-requested-but-not-found-at-srclib-Download-…"><a href="#这两句话是为了防止-安装时报如下错误-Configur-error-Bundled-APR-requested-but-not-found-at-srclib-Download-…" class="headerlink" title="这两句话是为了防止,安装时报如下错误  Configur:error:Bundled APR requested but not found at ./srclib/. Download …"></a>这两句话是为了防止,安装时报如下错误  Configur:error:Bundled APR requested but not found at ./srclib/. Download …</h3><p>和错误httpd: Syntax error on line 140 of /usr/local/apache2/conf/httpd.conf: Cannot load modules/mod_dir.so into server: /usr/local/apache2/modules/mod_dir.so: undefined symbol: apr_array_clear</p>
<h3 id="编译安装-make-amp-amp-make-install-2"><a href="#编译安装-make-amp-amp-make-install-2" class="headerlink" title="编译安装:make &amp;&amp; make install"></a>编译安装:make &amp;&amp; make install</h3><h3 id="编写启动脚本：vim-httpd"><a href="#编写启动脚本：vim-httpd" class="headerlink" title="编写启动脚本：vim httpd"></a>编写启动脚本：vim httpd</h3><h3 id="bin-bash"><a href="#bin-bash" class="headerlink" title="#!/bin/bash"></a>#!/bin/bash</h3><h3 id="chkconfig-12345-80-90"><a href="#chkconfig-12345-80-90" class="headerlink" title="#chkconfig: 12345 80 90"></a>#chkconfig: 12345 80 90</h3><p>function start_http()<br>{<br>/usr/local/apache2.4/bin/apachectl  start<br>}<br>function stop_http()<br>{<br>/usr/local/apache2.4/bin/apachectl  stop<br>}<br>case “$1” in<br>start)<br>start_http<br>;;<br>stop)<br>stop_http<br>;;<br>restart)<br>stop_http<br>start_http<br>;;<br>*)<br>echo “Usage : start | stop | restart”<br>;;<br>esac</p>
<h3 id="加入系统服务："><a href="#加入系统服务：" class="headerlink" title="加入系统服务："></a>加入系统服务：</h3><p>chmod  a+x  httpd<br>cp  -arf  httpd  /etc/init.d/ </p>
<h3 id="启动自己编写的服务："><a href="#启动自己编写的服务：" class="headerlink" title="启动自己编写的服务："></a>启动自己编写的服务：</h3><p>systemctl  daemon-reload<br>systemctl  start  httpd</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yoker.github.io/2018/12/04/httpd编译安装过程/" data-id="cjpbyz9ji0001skuwdamjkc3o" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2018/12/04/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/12/04/httpd编译安装过程/">httpd编译安装过程</a>
          </li>
        
          <li>
            <a href="/2018/12/04/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 醉问<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>